# ๐ Flujo de Importaciรณn/Exportaciรณn

## ๐ฅ FLUJO DE IMPORTACIรN

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    USUARIO                                   โ
โ                                                              โ
โ  1. Prepara archivo (JSON o CSV)                            โ
โ  2. Arrastra al dashboard o selecciona                      โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  FRONTEND                                    โ
โ                                                              โ
โ  โข Detecta tipo de archivo (.json o .csv)                   โ
โ  โข Muestra indicador de carga                               โ
โ  โข Envรญa FormData al API                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   API BACKEND                                โ
โ                                                              โ
โ  โข Recibe archivo                                           โ
โ  โข Detecta formato (JSON/CSV)                               โ
โ  โข Parsea contenido                                         โ
โ  โข Valida cada producto con Zod                             โ
โ  โข Transforma datos si es necesario                         โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  VALIDACIรN                                  โ
โ                                                              โ
โ  โ Campos requeridos presentes                             โ
โ  โ Tipos de datos correctos                                โ
โ  โ Valores de enum vรกlidos                                 โ
โ  โ Transformaciones aplicadas                              โ
โ  โ Errores registrados por fila                            โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                BASE DE DATOS                                 โ
โ                                                              โ
โ  โข Inserta productos vรกlidos                                โ
โ  โข Registra รฉxitos y fallos                                 โ
โ  โข Retorna resultado                                        โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  RESPUESTA                                   โ
โ                                                              โ
โ  โ รxito: "X productos importados"                         โ
โ  โ Error: "Errores en filas: [1, 5, 8]"                    โ
โ  ๐ Estadรญsticas: imported, failed, total                   โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    USUARIO                                   โ
โ                                                              โ
โ  โข Ve mensaje de confirmaciรณn                               โ
โ  โข Pรกgina se recarga automรกticamente                        โ
โ  โข Ve productos importados en la lista                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ค FLUJO DE EXPORTACIรN

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    USUARIO                                   โ
โ                                                              โ
โ  1. Click en "Exportar como JSON" o "Exportar como CSV"    โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  FRONTEND                                    โ
โ                                                              โ
โ  โข Muestra indicador de carga                               โ
โ  โข Hace peticiรณn GET al API                                 โ
โ  โข Especifica formato deseado                               โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   API BACKEND                                โ
โ                                                              โ
โ  โข Recibe peticiรณn con formato                              โ
โ  โข Consulta productos del usuario                           โ
โ  โข Ordena por fecha de creaciรณn                             โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                BASE DE DATOS                                 โ
โ                                                              โ
โ  โข Busca productos del usuario                              โ
โ  โข Retorna todos los productos                              โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  FORMATEO                                    โ
โ                                                              โ
โ  JSON:                                                       โ
โ  โข Parsea arrays (images, tags)                             โ
โ  โข Formatea con indentaciรณn                                 โ
โ  โข Content-Type: application/json                           โ
โ                                                              โ
โ  CSV:                                                        โ
โ  โข Genera encabezados                                       โ
โ  โข Escapa comillas                                          โ
โ  โข Formatea filas                                           โ
โ  โข Content-Type: text/csv                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  DESCARGA                                    โ
โ                                                              โ
โ  โข Crea Blob con contenido                                  โ
โ  โข Genera URL temporal                                      โ
โ  โข Crea elemento <a> invisible                              โ
โ  โข Trigger descarga automรกtica                              โ
โ  โข Limpia recursos                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    USUARIO                                   โ
โ                                                              โ
โ  โข Archivo descargado: productos-2025-10-31.json/csv       โ
โ  โข Ve mensaje de confirmaciรณn                               โ
โ  โข Puede editar el archivo                                  โ
โ  โข Puede re-importarlo despuรฉs                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ FLUJO COMPLETO: EDICIรN MASIVA

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  PASO 1: EXPORTAR                                           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  Usuario exporta productos actuales como CSV                โ
โ  Archivo: productos-2025-10-31.csv                          โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  PASO 2: EDITAR                                             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  Usuario abre CSV en Excel                                  โ
โ  Edita precios, descripciones, stock, etc.                  โ
โ  Guarda cambios                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  PASO 3: IMPORTAR                                           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  Usuario arrastra CSV modificado al dashboard               โ
โ  Sistema valida e importa cambios                           โ
โ  Productos actualizados en base de datos                    โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  RESULTADO: โ PRODUCTOS ACTUALIZADOS                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ฏ CASOS DE USO VISUALIZADOS

### Caso 1: Importar Catรกlogo Nuevo
```
Proveedor โ Excel โ CSV โ Dashboard โ โ Catรกlogo Importado
```

### Caso 2: Actualizar Precios
```
Dashboard โ Exportar CSV โ Excel โ Editar Precios โ 
Importar CSV โ โ Precios Actualizados
```

### Caso 3: Respaldo de Seguridad
```
Dashboard โ Exportar JSON โ Guardar โ 
(En caso de problema) โ Importar JSON โ โ Datos Restaurados
```

### Caso 4: Migraciรณn de Sistema
```
Sistema Antiguo โ Exportar โ Convertir Formato โ 
Importar โ โ Migraciรณn Completa
```

---

## ๐ ESTADรSTICAS DEL PROCESO

### Importaciรณn:
```
Total de Productos: 100
โโ Vรกlidos: 95 โ
โโ Con Errores: 5 โ
โโ Importados: 95 โ

Tiempo Promedio: 2-5 segundos
```

### Exportaciรณn:
```
Total de Productos: 100
โโ Formato JSON: ~50KB
โโ Formato CSV: ~30KB
โโ Tiempo: < 1 segundo

Descarga: Automรกtica
```

---

## ๐ VALIDACIONES EN CADA PASO

### Frontend:
- โ Tipo de archivo (.json o .csv)
- โ Tamaรฑo del archivo
- โ Formato bรกsico

### Backend:
- โ Estructura del archivo
- โ Campos requeridos
- โ Tipos de datos
- โ Valores de enum
- โ Transformaciones

### Base de Datos:
- โ Constraints de schema
- โ Relaciones
- โ Unicidad

---

## โจ CARACTERรSTICAS ESPECIALES

### Drag & Drop:
```
Usuario arrastra archivo โ Zona se ilumina โ 
Suelta archivo โ Importaciรณn automรกtica
```

### Detecciรณn Automรกtica:
```
Archivo .json โ Procesador JSON
Archivo .csv โ Procesador CSV
```

### Manejo de Errores:
```
Error en fila 5 โ Registra error โ 
Continรบa con fila 6 โ Importa vรกlidos โ 
Muestra resumen con errores
```

### Transformaciones:
```
"$10,000" โ 10000
"FISICO" โ "PHYSICAL"
"disponible" โ "AVAILABLE"
```

---

**Sistema Completo y Optimizado para Mรกxima Eficiencia** ๐
